define("theme_enva/imageeditable",["exports","core/str","core/notification","theme_enva/imagehandler"],(function(_exports,_str,_notification,_imagehandler){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Adding resize option to theme academylite.
   *
   * @module     theme_enva/imageeditable
   * @copyright  2024 Bas Brands
   * @author     Bas Brands
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_imagehandler=_interopRequireDefault(_imagehandler);_exports.init=()=>{document.querySelectorAll('[data-region="imageeditable"]').forEach((editableImage=>{const contextId=editableImage.getAttribute("data-contextid"),image=editableImage.querySelector("img"),fileInput=document.createElement("input");fileInput.setAttribute("type","file"),fileInput.setAttribute("accept","image/*"),fileInput.setAttribute("class","hidden");const imageUploadButton=document.createElement("button");imageUploadButton.setAttribute("type","button"),imageUploadButton.classList.add("btn","btn-secondary","uploadbutton");const imageUploadIcon=document.createElement("i");imageUploadIcon.classList.add("fa","fa-upload"),imageUploadButton.appendChild(imageUploadIcon),(0,_str.get_string)("uploadimage","theme_enva").then((string=>{const imageUploadText=document.createElement("span");return imageUploadText.classList.add("sr-only"),imageUploadText.innerHTML=string,imageUploadButton.appendChild(imageUploadText),""})).catch(_notification.default.exception),editableImage.appendChild(imageUploadButton),imageUploadButton.addEventListener("click",(()=>{fileInput.click()})),fileInput.addEventListener("change",(e=>{const file=e.target.files[0],reader=new FileReader;reader.addEventListener("load",(()=>{_imagehandler.default.saveImage(contextId,"overviewfiles",file,reader.result).then((result=>(result.success&&image.setAttribute("src",result.fileurl),""))).catch(_notification.default.exception)})),reader.readAsDataURL(file)}))}))}}));

//# sourceMappingURL=imageeditable.min.js.map